---
layout: post
title: Concurrent scene graph
subtitle: Multithreading
date: 2011-01-27 01:42
author: admin
comments: true
categories: [Uncategorized]
---
I am thinking about  concurrent scene graph. <br /> The are several modules in the engine, which needs queries to the scene graph, like Physics, Audio, Render. Moreover, in the future, several threads (tasks)  inside of module will need concurrent access to the scene graph.   <br />  There several options how to do it:  <br />  1) copies of scene graph in every module (<a href="http://delivery.acm.org/10.1145/570000/569679/p33-voss.pdf?key1=569679&amp;key2=6250016921&amp;coll=DL&amp;dl=ACM&amp;CFID=7637821&amp;CFTOKEN=45092137">used</a> also in OpenSceneGraph engine)- needs more memory, but should hold different types of objects - Physics module will hold only physics objects etc. Still it does not resolve problem with concurrent access in the future  <br />  2)  concurrent containers in the scene graph - maybe the best solution, but currently I can not find best fit for it. Also looks like it hardware dependent and not robust enought.  There is Intel Thread Building Blocks library with concurrent containers, but <a href="http://software.intel.com/en-us/forums/showthread.php?t=60494">it's not perfect</a> and doesn't support Android and iOS.  <br />  3) mutexes to isolate queries. Usage of mutex <a href="http://www.1024cores.net/home/lock-free-algorithms/scalability-prerequisites">is not good</a> thing for scalable multi threading, but maybe for some usage patterns it's ok. In my case it's SINGLE PRODUCER MULTIPLY CONSUMERS model.<br />  <br />       Can anyone suggest robust cross platform concurrent containers (hash_map or vector at least) ?  <br />  excellent blog <a href="http://www.1024cores.net/">http://www.1024cores.net</a> about concurrency and scalability.  <br />  UPD: I was wrong about Intel TBB, it's cool and powerful library. It's not clear now for me, how to use it under iOS or Android, but it's Open Source and ports are available for different platforms.
