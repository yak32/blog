---
layout: post
title:
date: 2010-08-05 06:53
author: admin
comments: true
categories: [Uncategorized]
---
Long time ago i wrote function, which creates quaternion for rotation from 0,0,1 to any unit vector. Function was very long, contained asin, acos, several conditions etc... So today i returned and after some time: <br />   <span class="Apple-tab-span" style="white-space:pre">  </span>// dir should be unit  <span class="Apple-tab-span" style="white-space:pre">  </span>void Quaternion::from_direction(const vec3&amp; dir)  <span class="Apple-tab-span" style="white-space:pre">  </span>{  <span class="Apple-tab-span" style="white-space:pre">   </span>x = dir.y;  <span class="Apple-tab-span" style="white-space:pre">   </span>y = -dir.x;  <span class="Apple-tab-span" style="white-space:pre">   </span>z = 0;  <span class="Apple-tab-span" style="white-space:pre">   </span>w = 1 + dir.z; // simplified dot product with 0,0,1  <br />  <span class="Apple-tab-span" style="white-space:pre">   </span>normalize();  <span class="Apple-tab-span" style="white-space:pre">  </span>};
